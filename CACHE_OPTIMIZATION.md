# Оптимизация обводок блоков

## Изменения

### Новые файлы

1. **`app/gui/annotation_cache.py`** - система кеширования аннотаций
2. **`docs/ANNOTATION_CACHE.md`** - документация

### Модифицированные файлы

1. **`app/gui/file_auto_save.py`**
   - Упрощен, использует `AnnotationCache`
   - Убраны прямые обращения к R2 при сохранении
   - Добавлены обработчики сигналов кеша

2. **`app/gui/file_operations.py`**
   - Инициализация кеша при загрузке аннотации

3. **`app/gui/main_window.py`**
   - Подключение сигналов кеша в `__init__`
   - Принудительная синхронизация при закрытии

## Результат

- ✅ Обводки блоков не тормозят UI
- ✅ Локальное сохранение через 0.5 сек
- ✅ Синхронизация R2 через 3 сек
- ✅ Все операции в фоновых потоках

## Тестирование

```bash
# Запустить приложение
python app/main.py

# 1. Открыть PDF с аннотацией
# 2. Быстро перетаскивать вершины полигонов
# 3. Проверить отсутствие подвисаний
# 4. Закрыть - проверить синхронизацию
```
