# Исправление: Задержка отображения задач в Remote OCR Jobs

## Проблема

После запуска распознавания задача очень долго не отображалась в Remote OCR Jobs панели.

## Причина

При создании задачи происходило следующее:
1. Задача оптимистично добавлялась в таблицу через `_add_job_to_table()`
2. Сразу вызывался `_refresh_jobs()` для синхронизации с сервером
3. В методе `_update_table()` таблица полностью очищалась (`setRowCount(0)`)
4. Если сервер возвращал список задач быстрее, чем задача успевала попасть в базу (или между POST и GET была небольшая задержка), оптимистично добавленная задача **исчезала** из таблицы
5. Пользователь не видел задачу до следующего автообновления (через 5-30 секунд)

## Решение

Реализован механизм защиты оптимистично добавленных задач:

### 1. Оптимистичный список задач
Добавлен словарь `_optimistic_jobs: dict = {}` для хранения задач формата `{job_id: (JobInfo, timestamp)}`

### 2. При создании задачи (`_on_job_created`)
- Задача добавляется в `_optimistic_jobs` с текущим timestamp
- Устанавливается быстрый интервал обновления (2 секунды)
- Задача немедленно отображается в таблице

### 3. При получении списка задач от сервера (`_on_jobs_loaded`)
- Проверяется наличие оптимистично добавленных задач в ответе сервера
- Если задача найдена - удаляется из `_optimistic_jobs`
- Если задачи нет в ответе, но она висит в списке более 60 секунд - удаляется (таймаут)
- Если задачи нет в ответе и таймаут не истёк - добавляется в начало `merged_jobs`
- Таблица обновляется объединённым списком задач

### 4. Очистка оптимистичного списка
- При удалении задачи
- При ошибке создания задачи

## Результат

✅ Задача **сразу появляется** в таблице Remote OCR Jobs после запуска распознавания
✅ Задача **не исчезает** из таблицы до синхронизации с сервером
✅ Быстрый интервал обновления (2 сек) обеспечивает скорейшую синхронизацию
✅ Таймаут 60 секунд предотвращает "зависание" оптимистичных задач

## Изменённые файлы

- `app/gui/remote_ocr_panel.py` - добавлен механизм оптимистичного добавления задач
- `app/gui/remote_ocr_job_operations.py` - добавлена очистка при удалении задачи

## Логирование

Добавлено информативное логирование для отладки:
- `Задача добавлена в оптимистичный список: {job_id}`
- `Задача {job_id} найдена в ответе сервера, удаляем из оптимистичного списка`
- `Задача {job_id} ещё не на сервере, добавляем оптимистично`
- `Задача {job_id} в оптимистичном списке более минуты, удаляем (таймаут)`
