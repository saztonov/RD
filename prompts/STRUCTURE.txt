==========================================================
СИСТЕМА ПРОМПТОВ OCR - СТРУКТУРА
==========================================================

Workflow:
---------

1. Пользователь запускает OCR
   ↓
2. Определяется тип блока (TEXT/TABLE/IMAGE)
   ↓
3. load_prompt() загружает соответствующий .txt файл
   ↓
4. Промпт передаётся в VLM/OCR движок
   ↓
5. Результат сохраняется в block.ocr_text


Файлы и их назначение:
----------------------

prompts/
│
├── ocr_text.txt              ← TEXT блоки
│   └─ Используется: Marker → TEXT
│
├── ocr_table.txt             ← TABLE блоки
│   └─ Используется: Marker → TABLE
│
├── ocr_image_description.txt ← IMAGE блоки
│   └─ Используется: Marker → IMAGE
│
├── ocr_full_page.txt         ← Вся страница
│   └─ Используется: Режим "Вся страница"
│
├── README.md                 ← Документация
├── QUICK_EDIT.md             ← Быстрый старт
├── STRUCTURE.txt             ← Эта диаграмма
└── .gitignore.example        ← Git настройки


Как редактировать:
------------------

┌─────────────────────────────────────────┐
│ 1. Открыть файл                         │
│    notepad prompts\ocr_text.txt         │
├─────────────────────────────────────────┤
│ 2. Изменить текст промпта               │
│    Распознай текст кратко.              │
├─────────────────────────────────────────┤
│ 3. Сохранить (UTF-8)                    │
├─────────────────────────────────────────┤
│ 4. Запустить OCR снова                  │
│    (перезапуск приложения не нужен)     │
└─────────────────────────────────────────┘


Примеры использования:
---------------------

┌──────────────────┐
│ Краткий режим    │ → Распознай текст.
└──────────────────┘

┌──────────────────┐
│ Подробный режим  │ → Распознай весь текст максимально точно.
└──────────────────┘   Сохрани структуру: заголовки, списки.
                       Исправь опечатки OCR.
                       Формат: Markdown.

┌──────────────────┐
│ Технические док. │ → Распознай технический текст.
└──────────────────┘   Сохрани все числовые параметры с единицами.
                       Распознай формулы и обозначения.
                       Сохрани ссылки на стандарты (ГОСТ, СНиП).


Код интеграции:
---------------

app/ocr.py:
  ├─ PROMPTS_DIR = Path("prompts/")
  ├─ load_prompt("ocr_text.txt")
  └─ LocalVLMBackend.recognize(image, prompt)

app/gui/main_window.py:
  ├─ _run_local_vlm_ocr_blocks()
  │  └─ load_prompt() по типу блока
  └─ _run_chandra_ocr_blocks()
     └─ load_prompt() для IMAGE


Fallback механизм:
------------------

Файл найден?
├─ Да → Использовать промпт из файла
└─ Нет → Использовать встроенный дефолтный промпт

Логирование:
  DEBUG: Промпт загружен из ocr_text.txt
  WARNING: Файл промпта не найден


Преимущества системы:
--------------------

✓ Редактирование без изменения кода
✓ Быстрая настройка под разные документы
✓ Версионирование промптов
✓ Откат к предыдущим версиям
✓ Специализация под задачи


Документация:
-------------

📖 prompts/README.md           - Основная документация
📖 prompts/QUICK_EDIT.md       - Быстрый старт
📖 docs/PROMPTS_CUSTOMIZATION.md - Детальная настройка
📖 PROMPTS_SYSTEM.md           - Техническая документация


==========================================================
Версия: 1.2.0 | Дата: 2025-11-30
==========================================================

