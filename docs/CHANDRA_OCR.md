# Chandra OCR Integration

Проект использует [Chandra OCR](https://github.com/datalab-to/chandra) - высокоточную модель распознавания документов.

## Возможности

- **Высокая точность**: Обработка сложных таблиц, форм, рукописного текста
- **Полная структура**: Сохранение форматирования и layout документа
- **Markdown выход**: Автоматическое преобразование в Markdown/HTML
- **Два режима**: HuggingFace (локально) и vLLM (быстрее)

## Установка

```bash
pip install chandra-ocr
```

## Использование

### Через GUI

1. Откройте PDF в приложении
2. Меню "Инструменты" → "Запустить OCR"
3. Выберите режим:
   - **По блокам**: Распознает ваши размеченные блоки
   - **Вся страница**: Автоматическая структура документа
4. Выберите метод:
   - **HuggingFace**: Локальная обработка
   - **vLLM сервер**: Требует запущенный vLLM сервер

### Через код

```python
from app.ocr import create_ocr_engine, ChandraOCRBackend
from PIL import Image

# Создать движок
ocr = create_ocr_engine("chandra", method="hf")

# Распознать изображение
image = Image.open("document.png")
text = ocr.recognize(image)
print(text)
```

### vLLM сервер (опционально)

Для ускорения обработки можно запустить vLLM сервер:

```bash
chandra_vllm
```

Затем в приложении выбирайте метод "vLLM сервер".

## Сравнение методов

| Метод | Скорость | Требования | Использование |
|-------|----------|------------|---------------|
| HuggingFace | Медленнее | GPU рекомендуется | Одиночные документы |
| vLLM | Быстро | GPU + запущен сервер | Массовая обработка |

## Бенчмарки

Chandra показывает лучшие результаты на olmocr bench:

- **Таблицы**: 88.0
- **Формы**: 90.8
- **Рукописный текст**: 80.3
- **Старые сканы**: 50.4

Подробнее: https://github.com/datalab-to/chandra#benchmarks

## Лицензия

- Код: Apache 2.0
- Модель: OpenRAIL-M (бесплатно для исследований, личного использования, стартапов < $2M)




